package com.pauwma.glyphbeat.animation.styles

import com.pauwma.glyphbeat.ui.settings.*

/**
 * Custom vinyl record theme with predefined 8-frame animation.
 * Uses specific pixel data to create a detailed vinyl record spinning animation.
 * Now extends ThemeTemplate for enhanced features and supports customizable settings.
 */
class VinylTheme() : ThemeTemplate(), ThemeSettingsProvider {
    
    // Settings-driven properties with default values
    private var currentAnimationSpeed: Long = getAnimationSpeed()
    private var currentBrightness: Int = 255
    private var currentVinylSize: String = "large"
    
    // =================================================================================
    // THEME METADATA - Custom vinyl record theme information
    // =================================================================================
    
    override val titleTheme: String = "Vinyl Record"
    override val descriptionTheme: String = "Go full retro.\nGo full DJ mode!"
    override val authorName: String = "pauwma"
    override val version: String = "1.0.0" 
    override val category: String = "Music"
    override val tags: Array<String> = arrayOf("vinyl", "record", "turntable", "classic", "spinning", "music")
    override val createdDate: Long = 1640995200000L // January 1, 2022
    
    // =================================================================================
    // ANIMATION PROPERTIES
    // =================================================================================
    
    override val animationSpeedValue: Long = 100L // Fast spinning like a real record
    override val brightnessValue: Int = 255
    override val loopMode: String = "normal"
    override val complexity: String = "Medium"
    
    // Use equal frame durations based on animationSpeedValue
    override val frameDurations: LongArray? = null
    
    // =================================================================================
    // BEHAVIOR SETTINGS
    // =================================================================================
    
    override val isReactive: Boolean = false
    override val supportsFadeTransitions: Boolean = true
    
    // =================================================================================
    // TECHNICAL METADATA
    // =================================================================================
    
    override val compatibilityVersion: String = "1.0.0"
    override val frameDataFormat: String = "shaped" // Uses circular matrix layout
    
    // =================================================================================
    // ANIMATION FRAMES - 8 frames of vinyl record spinning
    // =================================================================================
    
    override val frames = arrayOf(
        // Frame 1
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,255,0,205,0,0,0,165,0,0,0,0,255,255,205,0,0,0,0,165,0,0,0,205,0,255,255,0,255,0,0,205,0,0,0,0,255,255,255,205,205,0,0,0,0,205,0,0,255,0,255,255,0,255,0,0,255,0,0,0,0,255,255,0,255,255,0,0,0,0,255,0,0,255,0,255,255,0,255,0,0,205,0,0,0,0,205,205,255,255,255,0,0,0,0,205,0,0,255,0,255,255,0,205,0,0,0,165,0,0,0,0,205,255,255,0,0,0,0,165,0,0,0,205,0,255,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 2
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,205,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,205,0,0,165,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,205,0,0,0,0,0,0,0,255,255,255,205,205,0,0,0,0,0,0,0,165,0,255,255,0,165,0,0,0,0,0,0,0,205,255,0,255,205,0,0,0,0,0,0,0,165,0,255,255,0,165,0,0,0,0,0,0,0,205,205,255,255,255,0,0,0,0,0,0,0,205,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,165,0,0,205,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,205,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 3
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,205,165,0,0,0,0,0,0,0,0,0,0,255,255,0,0,255,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,255,0,0,0,205,165,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,205,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,205,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,205,255,255,255,205,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,205,255,0,255,205,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,205,255,255,255,205,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,205,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,205,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,165,205,0,0,0,255,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,255,0,0,255,255,0,0,0,0,0,0,0,0,0,0,165,205,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 4
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,205,205,165,165,0,0,0,0,255,255,255,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,205,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,205,165,0,0,0,0,0,0,0,0,0,0,0,255,255,0,165,0,0,165,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,205,205,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,205,255,0,255,205,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,205,205,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,165,0,0,165,0,255,255,0,0,0,0,0,0,0,0,0,0,0,165,205,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,205,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,255,255,255,0,0,0,0,165,165,205,205,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 5
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,205,255,255,255,205,0,0,0,255,255,255,0,0,0,165,205,0,0,0,0,0,205,165,0,0,0,255,255,0,0,0,165,0,0,0,0,0,0,0,0,0,165,0,0,0,255,255,0,0,0,0,0,0,0,0,205,255,205,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,165,0,0,0,165,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,205,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,205,205,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,205,205,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,205,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,165,0,0,0,165,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,205,255,205,0,0,0,0,0,0,0,0,255,255,0,0,0,165,0,0,0,0,0,0,0,0,0,165,0,0,0,255,255,0,0,0,165,205,0,0,0,0,0,205,165,0,0,0,255,255,255,0,0,0,205,255,255,255,205,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 6
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,165,165,205,205,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,205,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,165,205,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,165,0,0,165,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,205,205,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,205,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,205,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,205,205,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,165,0,0,165,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,205,165,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,205,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,205,205,165,165,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 7
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,165,205,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,255,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,165,205,0,0,0,255,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,205,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,205,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,205,205,205,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,205,205,205,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,205,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,205,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,255,0,0,0,205,165,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,255,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,205,165,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255),

        // Frame 8
        intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,205,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,255,255,0,0,0,0,0,0,0,0,0,0,255,205,205,0,0,0,0,0,165,0,0,205,0,255,255,0,165,0,0,0,0,0,0,0,255,255,255,205,255,0,0,0,0,0,0,0,205,0,255,255,0,165,0,0,0,0,0,0,0,255,255,0,255,255,0,0,0,0,0,0,0,165,0,255,255,0,205,0,0,0,0,0,0,0,255,205,255,255,255,0,0,0,0,0,0,0,165,0,255,255,0,205,0,0,165,0,0,0,0,0,205,205,255,0,0,0,0,0,0,0,0,0,0,255,255,0,0,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,205,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255)
    )
    
    // =================================================================================
    // SMALL SIZE FRAMES - 8 hardcoded frames for small vinyl size
    // =================================================================================
    
    private val smallFrames = arrayOf(
        // Small Frame 1
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,160,0,255,0,0,0,0,0,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,160,0,0,255,0,0,0,0,255,0,205,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,205,0,255,0,0,0,0,255,0,205,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,205,0,255,0,0,0,0,255,0,205,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,205,0,255,0,0,0,0,255,0,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,160,0,0,255,0,0,0,0,0,255,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,160,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 2
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,165,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,165,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,165,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,165,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 3
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,165,165,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,205,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,205,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,165,165,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 4
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,165,165,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,205,205,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,165,205,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,205,165,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,205,205,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,165,165,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 5
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,205,205,205,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,165,165,0,0,0,165,165,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,165,165,0,0,0,165,165,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,205,205,205,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 6
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,165,165,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,205,205,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,205,165,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,165,205,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,205,205,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,165,165,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 7
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,165,165,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,205,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,205,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,165,165,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

        // Small Frame 8
        intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,165,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,165,0,255,0,0,0,0,255,0,165,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,165,0,255,0,0,0,0,255,0,165,0,0,0,0,0,0,100,255,100,0,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,165,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
    )
    
    // framesCount and previewFrame are automatically calculated from frames array via lazy initialization
    
    // =================================================================================
    // STATE-SPECIFIC FRAMES - Using appropriate frames for different states with brightness support
    // =================================================================================
    
    // Base frames for state-specific displays (without brightness applied)
    private val basePausedFrame = frames[0] // Use first frame as paused state
    private val baseOfflineFrame = intArrayOf(255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,120,255,0,0,0,205,165,0,0,0,0,0,0,0,0,0,120,0,255,0,0,255,205,0,0,0,0,0,0,0,0,0,0,120,0,120,255,255,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,120,0,120,0,255,255,0,255,0,0,0,205,165,0,0,0,0,0,0,120,120,0,120,0,0,255,255,0,0,205,0,0,255,0,0,0,0,0,0,0,120,0,0,120,0,0,0,0,255,255,0,205,0,0,205,0,0,0,0,0,0,0,120,0,120,120,0,0,0,0,0,255,255,0,0,165,0,0,165,0,0,0,0,200,200,120,0,120,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,200,200,120,0,120,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,200,120,0,120,200,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,200,120,0,120,200,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,120,0,120,200,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,120,0,120,200,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,120,0,120,0,0,0,0,0,0,165,0,0,165,0,0,255,255,0,0,0,0,0,0,120,0,120,0,0,0,0,0,0,0,205,0,0,205,0,255,255,0,0,0,0,0,0,120,0,120,0,0,0,0,0,0,255,0,0,205,0,0,255,255,0,0,0,0,0,120,0,120,0,0,0,0,165,205,0,0,0,255,0,255,255,0,0,0,0,0,120,0,120,0,0,0,0,0,0,0,0,255,0,0,255,255,0,0,0,120,0,120,0,0,0,0,0,0,0,205,255,0,0,255,255,0,120,0,120,0,0,0,0,0,0,165,205,0,0,0,255,120,0,120,0,0,0,0,0,0,0,0,0,0,255,255,120,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255)

    private val smallOfflineFrame = intArrayOf(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,255,0,0,0,165,165,0,0,0,0,0,0,0,120,0,0,0,0,0,0,255,0,0,205,205,0,0,0,0,0,0,0,0,0,120,0,0,0,0,0,0,0,255,0,205,0,0,0,0,0,0,0,0,0,120,120,0,120,255,0,0,0,0,0,255,0,0,205,0,0,0,0,0,0,0,0,120,0,0,120,0,0,255,0,0,0,0,0,255,0,165,0,0,0,0,0,0,0,0,120,0,120,120,0,0,0,255,0,0,0,0,0,255,0,0,165,0,0,0,0,0,0,205,120,0,120,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,205,205,100,0,120,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,0,0,205,120,0,120,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,0,0,120,120,100,0,100,205,0,0,0,0,0,0,0,255,0,0,0,0,255,0,0,0,0,120,120,0,0,0,120,205,0,0,0,0,0,165,0,0,255,0,0,0,0,0,255,0,0,120,0,0,120,120,120,0,0,0,0,0,0,0,165,0,255,0,0,0,0,0,0,120,120,0,120,120,0,0,0,0,0,0,0,0,0,205,0,0,255,0,0,0,0,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,205,0,255,0,0,0,0,0,0,120,0,0,0,0,0,0,0,0,0,0,205,205,0,0,255,0,0,0,0,0,255,0,0,0,0,0,0,0,0,165,165,0,0,0,255,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,255,255,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)

    // Empty pausedFrame for smooth stop functionality (freezes at current animation frame)
    override val pausedFrame: IntArray = IntArray(0)
    
    override val offlineFrame: IntArray
        get() = applyBrightnessToFrame(
            if (currentVinylSize == "small") smallOfflineFrame else baseOfflineFrame
        )
    
    override val loadingFrame: IntArray
        get() = applyBrightnessToFrame(frames[0])
    
    override val errorFrame: IntArray = IntArray(625) { 0 } // Error frame stays black
    
    /**
     * Apply current brightness setting to any frame array
     */
    private fun applyBrightnessToFrame(baseFrame: IntArray): IntArray {
        return baseFrame.map { originalValue ->
            if (originalValue > 0) {
                ((originalValue * currentBrightness) / 255).coerceIn(0, 255)
            } else {
                0
            }
        }.toIntArray()
    }
    
    // Validation is handled by parent ThemeTemplate class
    
    // =================================================================================
    // OVERRIDDEN METHODS - Convert shaped data to flat array format
    // =================================================================================
    
    override fun getFrameCount(): Int = framesCount
    
    override fun getThemeName(): String = titleTheme
    override fun getAnimationSpeed(): Long = currentAnimationSpeed
    override fun getBrightness(): Int = currentBrightness
    override fun getDescription(): String = descriptionTheme
    
    // =================================================================================
    // THEME SETTINGS PROVIDER IMPLEMENTATION
    // =================================================================================
    
    override fun getSettingsSchema(): ThemeSettings {
        return ThemeSettingsBuilder(getSettingsId())
            .addSliderSetting(
                id = CommonSettingIds.ROTATION_SPEED,
                displayName = "Rotation Speed",
                description = "How fast the vinyl record spins",
                defaultValue = 100L,
                minValue = 50L,
                maxValue = 300L,
                stepSize = 10L,
                unit = "ms",
                category = SettingCategories.ANIMATION
            )
            .addDropdownSetting(
                id = "vinyl_size",
                displayName = "Vinyl Size",
                description = "Size of the vinyl record display",
                defaultValue = "large",
                optionsMap = mapOf(
                    "small" to "Small",
                    "large" to "Large"
                ),
                category = SettingCategories.VISUAL
            )
            .addSliderSetting(
                id = CommonSettingIds.BRIGHTNESS,
                displayName = "Brightness",
                description = "Overall brightness of the vinyl",
                defaultValue = 255,
                minValue = 10,
                maxValue = 255,
                stepSize = 5,
                unit = null,
                category = SettingCategories.VISUAL
            )
            .build()
    }
    
    override fun applySettings(settings: ThemeSettings) {
        // Apply rotation speed
        currentAnimationSpeed = settings.getSliderValueLong(CommonSettingIds.ROTATION_SPEED, 100L)
        
        // Apply brightness with validation
        val brightness = settings.getSliderValueInt(CommonSettingIds.BRIGHTNESS, 255)
        currentBrightness = brightness.coerceIn(10, 255)
        
        // Apply vinyl size
        currentVinylSize = settings.getDropdownValue("vinyl_size", "large")
    }
    
    override fun generateFrame(frameIndex: Int): IntArray {
        validateFrameIndex(frameIndex)
        
        // For Large size, use the original shaped data conversion
        if (currentVinylSize != "small") {
            // Convert shaped grid data to flat 25x25 array
            val shapedData = frames[frameIndex]
            val flatArray = createEmptyFrame()
            
            // The shaped data represents the circular matrix layout
            // We need to map it to the proper positions in a 25x25 grid
            var shapedIndex = 0
            
            for (row in 0 until 25) {
                for (col in 0 until 25) {
                    val flatIndex = row * 25 + col
                    
                    // Check if this pixel is within the circular matrix shape
                    val centerX = 12.0
                    val centerY = 12.0
                    val distance = kotlin.math.sqrt((col - centerX) * (col - centerX) + (row - centerY) * (row - centerY))
                    
                    if (distance <= 12.5 && shapedIndex < shapedData.size) {
                        // Apply brightness adjustment
                        val originalValue = shapedData[shapedIndex]
                        val adjustedValue = if (originalValue > 0) {
                            ((originalValue * currentBrightness) / 255).coerceIn(0, 255)
                        } else {
                            0
                        }
                        flatArray[flatIndex] = adjustedValue
                        shapedIndex++
                    }
                }
            }
            
            return flatArray
        } else {
            // For Small size, use the pre-computed flat array frames
            val frameData = smallFrames[frameIndex]
            
            // Apply brightness adjustment to the frame
            return frameData.map { originalValue ->
                if (originalValue > 0) {
                    ((originalValue * currentBrightness) / 255).coerceIn(0, 255)
                } else {
                    0
                }
            }.toIntArray()
        }
    }
    
    // All theme metadata and utility methods are inherited from ThemeTemplate parent class
    // No need to redefine them here - they automatically use the private properties defined above
}